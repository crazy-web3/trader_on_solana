# 🎯 如何使用行情数据查看器

## 📌 当前状态

✅ **后端服务已启动** - 运行在 http://localhost:5001
✅ **前端页面已准备** - 打开 `index.html` 即可使用

## 🚀 三步快速开始

### 第1步: 打开前端页面

在浏览器中打开 `index.html` 文件：
- 直接双击 `index.html` 文件
- 或在浏览器地址栏输入: `file:///path/to/index.html`

### 第2步: 选择查询参数

在左侧面板中：
1. **选择币种** - BTC/USDT, ETH/USDT, BNB/USDT, SOL/USDT
2. **选择时间周期** - 1分钟到1周
3. **设置时间范围** - 1到365天

### 第3步: 查询数据

点击 **🔍 查询数据** 按钮，系统会：
1. 检查缓存（如果有则直接返回）
2. 从数据源获取数据
3. 验证数据完整性
4. 存入缓存
5. 展示结果

## 📊 查看结果

### K线图表
- **蓝色线**: 收盘价 (Close)
- **绿色虚线**: 最高价 (High)
- **红色虚线**: 最低价 (Low)

### 数据表格
显示前50条详细数据，包括：
- 时间 (Timestamp)
- 开盘价 (Open)
- 最高价 (High)
- 最低价 (Low)
- 收盘价 (Close)
- 成交量 (Volume)

### 统计信息
- **数据条数**: 返回的K线数量
- **时间范围**: 数据的时间跨度
- **最高价**: 所有K线中的最高价
- **最低价**: 所有K线中的最低价

## 💾 缓存管理

### 查看缓存信息
右侧面板显示：
- **缓存条目数**: 当前缓存中的数据条数
- **最大容量**: 缓存最多可存储1000条
- **TTL (小时)**: 缓存数据保留24小时
- **API 状态**: 后端服务是否正常

### 清空缓存
点击 **🗑️ 清空缓存** 按钮清除所有缓存数据

## 🔍 查询示例

### 查询BTC最近7天的1小时K线
1. 币种: BTC/USDT
2. 时间周期: 1h
3. 时间范围: 7天
4. 点击查询

### 查询ETH最近1天的5分钟K线
1. 币种: ETH/USDT
2. 时间周期: 5m
3. 时间范围: 1天
4. 点击查询

### 查询SOL最近30天的日线
1. 币种: SOL/USDT
2. 时间周期: 1d
3. 时间范围: 30天
4. 点击查询

## ⚡ 快速技巧

### 快速查询
- 修改参数后，按 **Enter** 键快速查询
- 或点击 **🔍 查询数据** 按钮

### 缓存加速
- 相同的查询会自动使用缓存
- 缓存命中速度 < 100ms
- 缓存数据保留24小时

### 数据刷新
- 点击 **🔄 刷新缓存信息** 更新缓存状态
- 点击 **🗑️ 清空缓存** 清除所有缓存

## 🐛 常见问题

### Q: 前端无法连接到后端？
A: 
1. 确保后端服务正在运行
2. 检查浏览器控制台 (F12) 的错误信息
3. 确认API地址是否正确 (http://localhost:5001)

### Q: 为什么数据是模拟数据？
A: 当前使用测试数据源生成数据。要使用真实数据，需要实现真实的数据源适配器。

### Q: 缓存多久过期？
A: 默认24小时。可在 `app.py` 中修改。

### Q: 如何修改缓存大小？
A: 在 `app.py` 中修改 `CacheManager` 的 `max_size` 参数。

### Q: 支持哪些币种？
A: 
- BTC/USDT - 比特币
- ETH/USDT - 以太坊
- BNB/USDT - 币安币
- SOL/USDT - Solana

### Q: 支持哪些时间周期？
A:
- 1m - 1分钟
- 5m - 5分钟
- 15m - 15分钟
- 1h - 1小时
- 4h - 4小时
- 1d - 1天
- 1w - 1周

## 📱 浏览器要求

✅ Chrome 90+
✅ Firefox 88+
✅ Safari 14+
✅ Edge 90+

## 🔗 API 端点 (高级用户)

### 直接调用API

```bash
# 获取BTC最近7天的1小时K线
curl "http://localhost:5001/api/klines?symbol=BTC/USDT&interval=1h&days=7"

# 获取支持的币种
curl http://localhost:5001/api/symbols

# 获取支持的时间周期
curl http://localhost:5001/api/intervals

# 获取缓存统计
curl http://localhost:5001/api/cache/stats

# 清空缓存
curl -X POST http://localhost:5001/api/cache/clear
```

## 📊 数据格式

### K线数据格式
```json
{
  "timestamp": 1769428026889,    // Unix时间戳 (毫秒)
  "open": 104.00,                // 开盘价
  "high": 109.00,                // 最高价
  "low": 101.00,                 // 最低价
  "close": 106.00,               // 收盘价
  "volume": 1394.00              // 成交量
}
```

## 🎯 使用场景

### 场景1: 技术分析
1. 选择币种和时间周期
2. 查询历史K线数据
3. 在图表上分析价格走势
4. 识别支撑位和阻力位

### 场景2: 策略回测
1. 查询不同时间周期的数据
2. 分析不同币种的相关性
3. 为回测策略准备数据

### 场景3: 数据研究
1. 查询长期历史数据
2. 分析价格分布
3. 研究市场规律

## 💡 最佳实践

1. **定期清空缓存**: 每天清空一次缓存以获取最新数据
2. **合理设置时间范围**: 避免查询过长的时间范围
3. **使用合适的时间周期**: 根据分析需求选择合适的周期
4. **监控缓存大小**: 定期检查缓存统计信息

## 🚀 下一步

- 查看 `QUICKSTART.md` 了解更多详细信息
- 查看 `DEPLOYMENT.md` 了解部署和配置
- 查看 `SUMMARY.md` 了解项目完整情况

## 📞 需要帮助？

1. 查看浏览器控制台 (F12) 的错误信息
2. 查看后端日志输出
3. 查看相关文档文件
4. 运行 `test_api.py` 测试API

---

**祝你使用愉快！** 🎉

如有任何问题，请查看相关文档或检查日志输出。
